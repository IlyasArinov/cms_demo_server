{"version":3,"sources":["CMS/Blocks lazy /^/.//.*$/ groupOptions: {} namespace object","services/pages.js","Components/Button.js","Components/BlockWrapper.js","App.js","index.js"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","all","slice","keys","Object","module","exports","axios","get","response","data","page","put","Button","type","handleClick","text","componentStyle","background","style","onClick","BlockWrapper","content","blockType","updateContent","Block","React","lazy","useState","overlayStyle","setOverlayStyle","fallback","className","onDoubleClick","event","backgroundColor","zIndex","border","App","gridLayout","blocks","setBlocks","useEffect","pageService","returnedPage","components","console","log","find","block","handleGridItemClick","GridLayout","WidthProvider","RGL","newBlock","grid","x","y","w","h","length","changedPage","forEach","gridItem","i","push","catch","autoSize","verticalCompact","cols","rowHeight","onLayoutChange","layout","draggableCancel","c","key","data-id","data-grid","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.89d7ef50.chunk.js","sourcesContent":["var map = {\n\t\"./Text\": [\n\t\t30,\n\t\t0,\n\t\t1\n\t],\n\t\"./Text.js\": [\n\t\t30,\n\t\t0,\n\t\t1\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 64;\nmodule.exports = webpackAsyncContext;","import axios from 'axios'\nconst baseUrl = '/api/pages'\n\nconst get = (id) => axios.get(`${baseUrl}/${id}`).then(response => response.data);\nconst update = (id, page) => axios.put(`${baseUrl}/${id}`, page).then(response => response.data);\n\nexport default { get, update };","import React from 'react';\n\nfunction Button({type, handleClick, text}) {\n    const componentStyle = {\n        background: type === 'success' ? '#4caf50' : 'aliceblue',\n    }\n    return (\n        <button type=\"button\" style={componentStyle} onClick={handleClick}>\n            {text}\n        </button>\n    )\n}\n\nexport default Button;","import React, {Suspense, useState} from 'react';\n\nfunction BlockWrapper({id, content, blockType, updateContent}) {\n    const Block = React.lazy(() => import(`../CMS/Blocks/${blockType}`));\n    const [overlayStyle, setOverlayStyle] = useState({});\n    const handleDoubleClick = (event) => {\n        const clickedOverlayStyle = {\n            backgroundColor: 'transparent',\n            zIndex: 0,\n            border: '1px solid blue',\n        };\n        setOverlayStyle(clickedOverlayStyle);\n\n    };\n    return (\n        <Suspense fallback={<></>}>\n            <div className=\"overlay\" style={overlayStyle} onDoubleClick={handleDoubleClick}/>\n            <Block id={id} content={content} blockType={blockType} updateContent={updateContent}/>\n        </Suspense>\n    )\n}\n\nexport default BlockWrapper;","import React, {useState, useEffect} from 'react';\nimport pageService from './services/pages';\nimport Button from \"./Components/Button\";\nimport RGL, { WidthProvider } from \"react-grid-layout\";\nimport './App.css';\nimport BlockWrapper from \"./Components/BlockWrapper\";\n\nfunction App() {\n    const [blocks, setBlocks] = useState([]);\n    const id = 1; //Пока только одна страница\n    let gridLayout;\n    useEffect(() => {\n        pageService\n            .get(id)\n            .then(returnedPage => {\n                setBlocks(returnedPage.components)\n                console.log(returnedPage.components);\n            })\n    }, []);\n\n    const addBlockToBody = () => {\n        const newBlock = {\n            grid: {x: 4, y: 1, w: 1, h: 2},\n            content: null,\n            blockType: 'Text',\n            id: `${blocks.length + 1}`\n        }\n        console.log(blocks);\n        console.log(newBlock);\n        setBlocks([...blocks, newBlock ]);\n    }\n\n    const saveBlocks = () => {\n        const changedPage = {\n            id: id,\n            components: []\n        };\n        //Было бы неплохо, если у компонентов всегда был один и тот же неменяющийся идентификатор\n        gridLayout.forEach((gridItem) => {\n            // let block = document.querySelector(`.block[data-id=\"${gridItem.i}\"]`)\n            const data = {\n                id: gridItem.i,\n                grid: {...gridItem},\n                blockType: 'Text',\n                content: blocks.find(block => block.id === gridItem.i).content\n            };\n            console.log(data);\n            changedPage.components.push(data)\n        });\n        pageService.update(id, changedPage)\n            .then(returnedPage => {\n                // setCMSComponents(returnedPage.components);\n            })\n            .catch(() => {\n                console.log('somethingHappened');\n            });\n    };\n    const handleLayoutChange = (layout) => {\n        gridLayout = layout;\n    }\n    const updateContent = (id, content) => {\n        const changedBlock = blocks.find(block => block.id === id);\n        changedBlock.content = content;\n    };\n\n    const handleGridItemClick = (event) => {\n        // console.log(event.target);\n        // const gridItem = event.target.closest('.blockWrapper');\n        // gridItem.querySelector('.overlay').classList.add('active');\n    };\n\n    const GridLayout = WidthProvider(RGL);\n  return (\n    <>\n        <Button text=\"Добавить компонент\" type=\"normal\" handleClick={addBlockToBody} />\n        <Button text=\"Сохранить\" type=\"success\" handleClick={saveBlocks} />\n        <GridLayout\n            autoSize={true}\n            verticalCompact={false}\n            className=\"layout\"\n            cols={12}\n            rowHeight={30}\n            onLayoutChange={handleLayoutChange}\n            draggableCancel=\".demo-wrapper\"\n        >\n            {blocks.map(c =>\n                <div className=\"blockWrapper\"\n                     key={c.id}\n                     data-id={c.id}\n                     data-grid={c.grid}\n                     onClick={handleGridItemClick}\n                >\n                    <BlockWrapper {...c} updateContent={updateContent} />\n                </div>\n            )}\n        </GridLayout>\n\n    </>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}